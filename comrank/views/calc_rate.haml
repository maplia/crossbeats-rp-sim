= haml :navi, :locals => {:ancestry => [CxbRank::SITE_TOP_URI]}
%h1= page_title
= javascript_include_tag 'http://maplia.jp/script/jquery.json2table.js'
= javascript_include_tag '/common/javascripts/common.js'
= javascript_include_tag '/common/javascripts/scorerate.js'
:javascript
  var data = null;
  var diffs = null;
  $(document).ready(function () {
    data = #{data.to_json};
    diffs = #{diffs.to_json};
    mobile = #{mobile?.to_s};
    initialize();
  });
%p 選択した譜面とスコアから得点率を計算するツールです（バグ報告は <a href="https://twitter.com/maplia">@maplia</a> までお願いします）
%div.unit
  %h2 入力フォーム
  %div.subunit
    %form
      %p
        選択曲:
        %select#select_music
      %p
        譜面難度:
        - music_diffs.keys.sort.each do |diff|
          %label
            = radio_button_tag :diff, :value => CxbRank::MUSIC_DIFF_PREFIXES[diff], :checked => (diff == CxbRank::MUSIC_DIFF_UNL)
            = music_diffs[diff]
      %p
        スコア:
        = text_field_tag :score, :maxlength => 5, :size => 5
        = button_tag '計算', :onClick => 'calcScoreRate()'
%div.unit
  %h2 計算結果
  %div.subunit
    %table#table_rate
