- musics = CxbRank::Music.find(:all, :conditions => ['added_at >= ?', Date.today-28], :order => 'added_at desc, number')
- if musics.blank?
  %p 最近登録された曲はありません
- else
  - unless mobile?
    %table.music_list
      %thead
        %tr
          %th 追加日
          - if CxbRank::SiteSettings.cxb_mode?
            %th #
          %th タイトル
          - CxbRank::SiteSettings.music_diffs.keys.sort.each do |diff|
            %th{:class => "level #{CxbRank::MUSIC_DIFF_CLASSES[diff]}"}= CxbRank::SiteSettings.music_diffs[diff]
          %th 追加イベント
      %tbody
        - musics.each do |music|
          %tr
            %th= music.added_at.strftime('%m/%d')
            - if CxbRank::SiteSettings.cxb_mode?
              %th= music.number
            %td.title
              = haml :music_title, :locals => {:music => music}
            - CxbRank::SiteSettings.music_diffs.keys.sort.each do |diff|
              %td{:class => "level #{CxbRank::MUSIC_DIFF_CLASSES[diff]}"}= music.level_to_s(diff)
            %td= music.event
  - else
    %ul
      - musics.each do |music|
        %li= "#{music.full_title} (#{music.added_at.strftime('%m/%d')})"
